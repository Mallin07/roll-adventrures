*{box-sizing:border-box}
:root {
  --alto-menu: 56px; /* o el alto real de tu barra */
}

body {
  margin: 0;
  font-family: system-ui, Segoe UI, Roboto, sans-serif;
  background: #f5efe3;
  padding-top: var(--alto-menu); /* deja espacio para el header fijo */
  color: #222;
}

/* ---------------------------------Menú superior--------------------------------------- */
:root { --header-h: 64px; } /* ajusta a tu alto real */


.menu-superior{
  position: fixed;
  top: 0;
  left: 50%;
  width: 100vw;                 /* SIEMPRE ocupa el viewport */
  transform: translateX(-50%);  /* ignora el ancho del contenedor padre */
  z-index: 1000;

  background: rgba(50, 25, 10, 0.9);
  border-bottom: 3px solid #3b1d0b;
  padding: calc(10px + env(safe-area-inset-top)) 20px 10px
           calc(20px + env(safe-area-inset-left)); /* notch friendly */
  box-shadow: 0 4px 10px rgba(0,0,0,0.4);
}

/* Contenido del nav centrado y adaptable */
.menu-superior nav{
  max-width: 1200px;   /* opcional: límite interno de contenido */
  margin: 0 auto;
}
.menu-superior nav ul{
  list-style: none;
  display: flex;
  gap: 20px;
  flex-wrap: wrap;          /* si no cabe, baja a otra línea */
  align-items: center;
  justify-content: center;  /* centrado horizontal */
  margin: 0;
  padding: 0;
}
.menu-superior nav a{
  text-decoration: none;
  color: #fdf5e6;
  font-weight: 700;
  font-size: 1.2rem;
  transition: color .3s;
}
.menu-superior nav a:hover{ color:#ffd700; }

/* Evita desbordes horizontales y despeja el header fijo */
html, body { overflow-x: hidden; margin: 0; }
main { padding-top: calc(var(--header-h) + 16px); }

.menu-superior nav a:hover {
  color: #ffd700;
}

.sheet{display:grid;grid-template-columns: 360px 1fr;gap:20px;max-width:1200px;margin:18px auto;padding:0 16px}
h1{font-size:1.6rem;margin:.2rem 0}
h2{font-size:1rem;margin:0 0 .6rem;color:#555}

/* panel izquierdo */
.bio{background:#fff;border:2px solid #cdb59b;border-radius:12px;padding:14px;box-shadow:0 4px 16px rgba(0,0,0,.06)}
.stats{margin-top:8px;border:2px solid #cdb59b;border-radius:10px;padding:8px}
.stat-row{display:flex;justify-content:space-between;align-items:center;padding:6px 4px;border-bottom:1px dashed #e6d8c6}
.stat-row:last-child{border-bottom:0}
.stat-controls{display:flex;align-items:center;gap:6px}
.stat-controls button{width:26px;height:26px;border-radius:6px;border:1px solid #b59a7c;background:#f6efe5;cursor:pointer}
.stat-controls button:hover{background:#f0e3d1}
.stat-controls output{min-width:28px;display:inline-block;text-align:center;font-weight:700}

.elemental{margin-top:10px;border-top:3px solid #cdb59b;padding-top:10px}
.elemental h3{margin:.4rem 0}
.elemental ul{margin:.2rem 0 .6rem 0;padding-left:1rem}
.elemental li{line-height:1.6}

/* panel derecho */
.avatar h3{margin:.5rem 0}
.slots{display:flex;gap:10px;margin-bottom:8px}
.slot{width:64px;height:64px;border:3px solid #6b6b6b;border-radius:10px;background:#f5f5f5 center/cover no-repeat;cursor:pointer;box-shadow:inset 0 0 0 2px rgba(0,0,0,.03); transition:filter .15s ease}
.slots--purple .slot{border-color:#7e55d5}
.slots--orange .slot{border-color:#d58a42}
.slots--blue .slot{border-color:#1f7bd9}
.slot:hover{filter:brightness(.95)}

.figure{position:relative;width:250px;height:300px;margin:10px 0;border:2px dashed #cdb59b;border-radius:12px;background:#fff}
.part{position:absolute;border:2px solid #8aa3b3;background:#f1f7fb;cursor:pointer;border-radius:6px}
.part.injured{background:#e74c3c !important;border-color:#b12c20}
.cabeza{top:10px;left:90px;width:54px;height:54px;border-radius:50%}
.cuerpo{top:70px;left:80px;width:80px;height:90px}
.bra-der{top:80px;left:165px;width:25px;height:80px}
.bra-izq{top:80px;left:50px;width:25px;height:80px}
.mano-der{top:165px;left:165px;width:22px;height:22px;border-radius:50%}
.mano-izq{top:165px;left:50px;width:22px;height:22px;border-radius:50%}
.pierna-der{top:165px;left:120px;width:30px;height:90px}
.pierna-izq{top:165px;left:90px;width:30px;height:90px}
.pie-der{top:255px;left:120px;width:36px;height:18px;border-radius:10px}
.pie-izq{top:255px;left:85px;width:36px;height:18px;border-radius:10px}

.tracks{margin:10px 0 14px;display:grid;gap:10px}
.track{display:flex;align-items:center;gap:10px}
.pips{display:grid;grid-template-columns:repeat(10, 18px);gap:6px}
.pip{width:18px;height:18px;border-radius:50%;border:2px solid #555;background:#eee;cursor:pointer}
.pip.vida.active{background:#e74c3c;border-color:#b12c20}
.pip.mana.active{background:#3b82f6;border-color:#205ccf}
.pip.hambre.active{background:#22c55e;border-color:#15803d}
.pip.sueno.active{background:#cbdf18;border-color:#798510}

.bag{display:grid;grid-template-columns:repeat(3, 64px);gap:10px}

/* =========================================================
   NUEVO: Menú contextual (Ver / Mover / Eliminar)
   =======================================================*/
.ctxmenu{
  position:fixed; z-index:9999;
  background:#fff; border:2px solid #cdb59b; border-radius:10px;
  box-shadow:0 8px 24px rgba(0,0,0,.15);
  padding:6px; min-width:180px
}
.ctxmenu button{
  display:block; width:100%; text-align:left;
  background:#fff; border:0; padding:8px 10px;
  border-radius:8px; font-weight:600; cursor:pointer
}
.ctxmenu button:hover{background:#f6efe5}

/* =========================================================
   NUEVO: Modal “Ver objeto”
   =======================================================*/
.modal.hidden{display:none}
.modal{position:fixed; inset:0; z-index:9998}
.modal__backdrop{position:absolute; inset:0; background:rgba(0,0,0,.45)}
.modal__window{
  position:relative; margin:6vh auto 0; max-width:560px; width:92%;
  background:#fff; border:2px solid #cdb59b; border-radius:14px;
  box-shadow:0 12px 40px rgba(0,0,0,.2); overflow:hidden
}
.modal__header{
  display:flex; align-items:center; justify-content:space-between;
  padding:10px 12px; background:#f5efe3; border-bottom:2px solid #e6d8c6
}
.modal__close{border:0; background:transparent; font-size:24px; line-height:1; cursor:pointer}
.modal__body{padding:12px}
.modal__img{
  display:none; max-width:100%; border-radius:10px; margin:6px 0 10px;
  background:#f5f5f5
}
.modal__text{
  white-space:pre-wrap;
  font-family:ui-monospace, SFMono-Regular, Menlo, monospace;
  background:#faf7f2; border:1px solid #eadfcf; border-radius:8px;
  padding:10px; margin:0
}
.modal__footer{padding:10px 12px; display:flex; justify-content:flex-end; gap:8px}
.modal__btn{
  background:#3a2416; color:#fff; border:0; padding:8px 12px; border-radius:8px; cursor:pointer
}
.modal__btn:hover{background:#2b180e}

/* =========================================================
   NUEVO: Indicadores de “modo mover”
   =======================================================*/
.slot.is-move-source{outline:3px solid #22c55e; outline-offset:2px}
.slot.is-move-target{outline:3px dashed #22c55e; outline-offset:2px}

/* Accesibilidad mínima */
@media (prefers-reduced-motion: reduce){
  .slot{transition:none}
}

@media (max-width: 480px){
  :root { --header-h: 56px; }
  .menu-superior nav a{ font-size: 1rem; }
}